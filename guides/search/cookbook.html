

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Search API Cookbook &mdash; PDS APIs B14.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="PDS Search API Links" href="links.html" />
    <link rel="prev" title="Tutorials/Cookbooks" href="tutorials.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> PDS APIs
          

          
            
            <img src="../../_static/PDS_Planets.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                B14.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../search.html">Search API User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoints.html">Query Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="responses.html">Responses</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="tutorials.html">Tutorials/Cookbooks</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="tutorials.html#sample-jupyterlab-notebooks-python">Sample JupyterLab Notebooks (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorials.html#web-search-interface-tutorial-html-javascript">Web Search Interface Tutorial (HTML/Javascript)</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="tutorials.html#search-examples">Search Examples</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Search API Cookbook</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference external" href="https://nasa-pds.github.io/pds-api/specifications/search-v1.1.0-redoc.html">API Full Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="links.html">Links</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../specifications.html">Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general-conventions.html">General API Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools.html">Tools and Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../acknowlegements.html">Acknowledgements</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PDS APIs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../search.html">Search API User Guide</a> &raquo;</li>
        
          <li><a href="tutorials.html">Tutorials/Cookbooks</a> &raquo;</li>
        
      <li>Search API Cookbook</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/nasa-pds/pds-api/blob/main/docs/source/guides/search/cookbook.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="search-api-cookbook">
<h1>Search API Cookbook<a class="headerlink" href="#search-api-cookbook" title="Permalink to this headline">¶</a></h1>
<p>Recipes for various search scenarios using the PDS Search API.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>curl command line tool is used to request the API in this documentation. curl is available in many operating systems by default. If not, you can get curl from <a class="reference external" href="https://curl.se/">https://curl.se/</a> or using a package management tool specific to your operating system (brew, apt, …).</p>
</div>
<div class="section" id="search-for-product-versions">
<h2>Search For Product Versions<a class="headerlink" href="#search-for-product-versions" title="Permalink to this headline">¶</a></h2>
<p>Recipes for searching for the latest version of a product, or all versions of a product, including superseded versions.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Since our servers are not fully populated with all PDS data sets, the examples presented in this user guide may return empty results or 404 (Not Found) errors. If there is a data set you would like added, please submit a request to the <a class="reference external" href="https://pds.nasa.gov/?feedback=true">PDS Help Desk</a> for assistance.</p>
</div>
<div class="section" id="search-the-latest-version-of-a-product">
<h3>Search the Latest Version of a Product<a class="headerlink" href="#search-the-latest-version-of-a-product" title="Permalink to this headline">¶</a></h3>
<p>To retrieve the <strong>latest</strong> versions of product <code class="docutils literal notranslate"><span class="pre">urn:nasa:pds:mars2020.spice</span></code>, the request is:</p>
<p>The request:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>https://pds.nasa.gov/api/search/1/products/urn:nasa:pds:mars2020.spice
</pre></div>
</div>
<p>which is equivalent to:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>https://pds.nasa.gov/api/search/1/products/urn:nasa:pds:mars2020.spice/latest
</pre></div>
</div>
</div>
<div class="section" id="search-for-all-versions-of-a-product">
<h3>Search for All Versions of a Product<a class="headerlink" href="#search-for-all-versions-of-a-product" title="Permalink to this headline">¶</a></h3>
<p>To retrieve <strong>all</strong> the versions of product <code class="docutils literal notranslate"><span class="pre">urn:nasa:pds:mars2020.spice</span></code>, the request is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>https://pds.nasa.gov/api/search/1/products/urn:nasa:pds:mars2020.spice/all
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="search-by-specific-metadata">
<h2>Search By Specific Metadata<a class="headerlink" href="#search-by-specific-metadata" title="Permalink to this headline">¶</a></h2>
<p>The following recipes describe some example queries of the Search API using the <cite>q=</cite> query parameter showing some more complex use cases for querying PDS data.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Since our servers are not fully populated with all PDS data sets, the examples presented in this user guide may return empty results or 404 (Not Found) errors. If there is a data set you would like added, please contact the <a class="reference external" href="mailto:pds-operator&#37;&#52;&#48;jpl&#46;nasa&#46;gov">PDS Help Desk</a> for assistance.</p>
</div>
<div class="section" id="search-by-processing-level">
<h3>Search by Processing Level<a class="headerlink" href="#search-by-processing-level" title="Permalink to this headline">¶</a></h3>
<p>Search for the 10 latest collections which processing level is “Raw”:</p>
<p><strong>Query:</strong> <code class="docutils literal notranslate"><span class="pre">(pds:Primary_Result_Summary.pds:processing_level</span> <span class="pre">eq</span> <span class="pre">&quot;Raw&quot;)</span></code></p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">curl command</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>--get<span class="w"> </span><span class="s1">&#39;https://pds.nasa.gov/api/search/1/products&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--data-urlencode<span class="w"> </span><span class="s1">&#39;limit=10&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--data-urlencode<span class="w"> </span><span class="s1">&#39;q=(pds:Primary_Result_Summary.pds:processing_level eq &quot;Raw&quot;)&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="search-observational-products-by-target">
<h3>Search Observational Products by Target<a class="headerlink" href="#search-observational-products-by-target" title="Permalink to this headline">¶</a></h3>
<p>Search for all Observational Products targeting Bennu:</p>
<p><strong>Query:</strong> <code class="docutils literal notranslate"><span class="pre">(ref_lid_target</span> <span class="pre">eq</span> <span class="pre">&quot;urn:nasa:pds:context:target:asteroid.101955_bennu&quot;)</span></code></p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">curl command</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>--get<span class="w"> </span><span class="s1">&#39;https://pds.nasa.gov/api/search/1/products&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--data-urlencode<span class="w"> </span><span class="s1">&#39;q=(ref_lid_target eq &quot;urn:nasa:pds:context:target:asteroid.101955_bennu&quot;)&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="search-by-reference">
<h3>Search by Reference<a class="headerlink" href="#search-by-reference" title="Permalink to this headline">¶</a></h3>
<p>Search all products which are referring to a given LID:</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">curl command</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>curl<span class="w"> </span>--get<span class="w"> </span><span class="s1">&#39;https://pds.nasa.gov/api/search/1/products&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>--data-urlencode<span class="w"> </span><span class="s1">&#39;limit=200&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>--data-urlencode<span class="w"> </span><span class="s1">&#39;q=((pds:Internal_Reference.pds:lid_reference eq &quot;urn:nasa:pds:context:investigation:mission.orex&quot;) or (pds:Internal_Reference.pds:lid_reference like &quot;urn:nasa:pds:context:investigation:mission.orex::*&quot;))&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>json_pp
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="search-for-dois">
<h2>Search for DOIs<a class="headerlink" href="#search-for-dois" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://www.doi.org/">Digital Object Identifiers</a> are useful to cite the data you are using in your research. DOIs for PDS data are minted for PDS4 Bundles, PDS4 Collections, PDS4 Documents, and PDS3 Data Sets. The level at which the DOI is minted differs from data set to data set.</p>
<p>The following recipes describe how to find a DOI for a particular product or data set in the Search API metadata.</p>
<p>See the [DOI Search](<a class="reference external" href="https://pds.nasa.gov/tools/doi/">https://pds.nasa.gov/tools/doi/</a>) for an online interface for searching this information.</p>
<p>See the documentation on <a class="reference external" href="https://pds.nasa.gov/datastandards/citing/">Citing PDS Data</a> for more information on how to use a DOI to cite your data.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Since our servers are not fully populated with all PDS data sets, the examples presented in this user guide may return empty results or 404 (Not Found) errors. If there is a data set you would like added, please contact the <a class="reference external" href="mailto:pds-operator&#37;&#52;&#48;jpl&#46;nasa&#46;gov">PDS Help Desk</a> for assistance.</p>
</div>
<div class="section" id="how-to-find-the-doi-associated-with-an-observational-product">
<h3>How to Find the DOI associated with an Observational Product<a class="headerlink" href="#how-to-find-the-doi-associated-with-an-observational-product" title="Permalink to this headline">¶</a></h3>
<p>We assume you know the identifier of the product you are working with but a couple are provided in the examples below.</p>
<div class="section" id="search-for-a-product-s-collection-doi">
<h4>Search for a Product’s Collection DOI<a class="headerlink" href="#search-for-a-product-s-collection-doi" title="Permalink to this headline">¶</a></h4>
<p>Run the following request to get the DOI associated with the collection the observational product <cite>urn:nasa:pds:compil-comet:nuc_properties:description::1.0</cite> belongs to:</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">curl command</span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>curl<span class="w"> </span>--get<span class="w"> </span><span class="s1">&#39;https://pds.nasa.gov/api/search/1/products/urn:nasa:pds:vg1-saturn-pos-hgcoords-96sec:data-spice:spice-hg::1.0/member-of&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>--data-urlencode<span class="w"> </span><span class="s1">&#39;fields=pds:Citation_Information.pds:doi&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>--header<span class="w"> </span><span class="s1">&#39;Accept: application/kvp+json&#39;</span>
</pre></div>
</div>
</div>
<p id="doi-collection-request-result">You will get the following result:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;summary&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;q&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;hits&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;took&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">125</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;start&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;limit&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;sort&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">        </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;pds:Citation_Information.pds:doi&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">           </span><span class="nt">&quot;pds:Citation_Information.pds:doi&quot;</span><span class="p">:</span><span class="s2">&quot;10.17189/1522962&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that you might not find any DOI at the collection level, in this case you can try to get the DOI from the bundle.</p>
</div>
<div class="section" id="search-for-a-product-s-bundle-doi">
<h4>Search for a Product’s Bundle DOI<a class="headerlink" href="#search-for-a-product-s-bundle-doi" title="Permalink to this headline">¶</a></h4>
<p>To get the DOI associated with the bundle the observational product <cite>urn:nasa:pds:insight.spice:document:spiceds::1.0</cite> belongs to:</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">curl command</span><a class="headerlink" href="#id8" title="Permalink to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>curl<span class="w"> </span>--get<span class="w"> </span><span class="s1">&#39;https://pds.nasa.gov/api/search/1/products/urn:nasa:pds:insight.spice:document:spiceds::1.0/member-of/member-of&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>--data-urlencode<span class="w"> </span><span class="s1">&#39;fields=pds:Citation_Information/pds:doi&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>--header<span class="w"> </span><span class="s1">&#39;Accept: application/kvp+json&#39;</span>
</pre></div>
</div>
</div>
<p id="doi-bundle-request-result">You will get the following result:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;summary&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;q&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;hits&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;took&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">135</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;start&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;limit&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;sort&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">        </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="s2">&quot;pds:Citation_Information.pds:doi&quot;</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;pds:Citation_Information.pds:doi&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10.17189/1517566&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="how-to-find-the-pds-product-associated-with-a-doi">
<h3>How to Find the PDS Product Associated with a DOI<a class="headerlink" href="#how-to-find-the-pds-product-associated-with-a-doi" title="Permalink to this headline">¶</a></h3>
<p>To get the PDS product metadata associated with a the DOI <cite>10.17189/1517568</cite>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>--get<span class="w"> </span><span class="s1">&#39;https://pds.nasa.gov/api/search/1/products&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--data-urlencode<span class="w"> </span><span class="s1">&#39;q=(pds:Citation_Information.pds:doi eq &quot;10.17189/1522962&quot;)&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--header<span class="w"> </span><span class="s1">&#39;Accept: application/json&#39;</span>
</pre></div>
</div>
<p>You will get a JSON response of the PDS products (any class of product, for example collections or bundles) which have referenced the given DOI.</p>
<p>You can get the result in different format using content negociation with the Accept header parameter.</p>
<p><strong>Looking for more recipes? Or have some useful recipes of your own?</strong> Checkout the <a class="reference external" href="https://github.com/NASA-PDS/pds-api/discussions">PDS API Discussion Board</a> or contact the <a class="reference external" href="mailto:pds-operator&#37;&#52;&#48;jpl&#46;nasa&#46;gov">PDS Help Desk</a></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="links.html" class="btn btn-neutral float-right" title="PDS Search API Links" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tutorials.html" class="btn btn-neutral float-left" title="Tutorials/Cookbooks" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2022 California Institute of Technology

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>